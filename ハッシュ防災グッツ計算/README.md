# 防災グッツ必要量計算（簡易版）

このリポジトリは、家族構成（年齢別人数）と日数を入力して、必要な防災グッツのおおよその数量を計算するシンプルな静的ウェブページです。

## ファイル
- `index.html` - 入力フォームと結果表示のページ
- `styles.css` - 最低限のスタイル
- `script.js` - 計算ロジックと表示処理

## 使い方
1. `index.html` をブラウザで開く（ローカルファイルで可）
2. 備蓄日数、年齢別人数、必要な場合は特記事項を入力
3. 「計算する」を押すと推奨リストが表示されます

# 防災グッツ必要量計算（簡易版）

このリポジトリは、家族構成（年齢別人数）と日数を入力して、必要な防災グッツのおおよその数量を計算するシンプルな静的ウェブページです。

## ファイル
- `index.html` - 入力フォームと結果表示のページ
- `styles.css` - 最低限のスタイル
- `script.js` - 計算ロジックと表示処理
- `shared_items.json` - 同梱の共有アイテム（静的）
- `run_server.ps1` - Windows向けの簡易ローカルサーバ起動スクリプト
- `.vscode/` - VSCode タスク/ランチ設定
- `server/` - （オプション）共有アイテム用の Node.js サーバーサンプル

## 使い方（ローカルでの確認）
1. `index.html` をブラウザで開く（ローカルファイルでも動作します）
2. またはローカルサーバで配信してブラウザで開く（推奨）

### ローカルサーバ起動の例
- PowerShell（Windows）でプロジェクトルートに移動して:

```powershell
.
\run_server.ps1
```

- または VSCode の Task「Serve: python -m http.server」を実行してから F5 でブラウザを開きます。

## 主要な仮定（目安）
- 飲料水: 乳児1.5 L/日、こども2.5 L/日、大人/高齢者3 L/日
- 食料: 3食/人・日
- オムツ: 乳児8枚/日
- 粉ミルク: 乳児0.8 L/日（目安）
- 毛布: 1人につき1枚
- 懐中電灯: 2人に1個（繰り上げ）
- マスク: 2枚/人・日
- 携帯トイレ用袋: 2個/人・日

これらはあくまで目安です。自治体の推奨や医師の指示を優先してください。

## 共有アイテムの運用（ローカル or サーバ）

現在、公開されている「みんなが追加したアイテム」は `shared_items.json`（静的ファイル）として同梱しています。ブラウザ上の「みんなの追加アイテムを表示」ボタンで取得できます。

将来的に複数ユーザーで投稿・共有したい場合は、サーバ側 API が必要です。簡易サーバーのサンプルを `server/` に用意しました。使い方は下記の通りです。

### Node.js 簡易サーバー（サンプル）

1. Node.js をインストール（LTS推奨）
2. ターミナルで `server` フォルダに移動して依存をインストール:

```powershell
cd server
npm install
```

3. サーバを起動:

```powershell
npm start
```

4. デフォルトで http://localhost:3000/items に GET / POST の API が立ち上がります。

API仕様（簡易）:
- GET /items : 共有アイテム一覧を取得（JSON）
- POST /items : 新しいアイテムを追加（JSON ボディ: { name, unit, perDay: { infant, child, adult, elderly } }）

注意: このサンプルは教育目的のシンプル実装です。本番運用する場合は認証、入力検証、レート制限、バックアップを実装してください。

### ブラウザ側の設定
`script.js` は現在 `shared_items.json` をローカルファイルから取得します。サンプルサーバーに接続する場合は、`script.js` の `SHARED_PATH` を `http://localhost:3000/items` のように書き換えることでオンライン共有APIから読み込めます（CORSが必要なので、サンプルサーバーは CORS を有効にしています）。

## 重複チェック
- カスタムアイテムを追加する際、同名（大文字小文字無視）の既存アイテムがあれば確認ダイアログで「上書き」か「中止」かを選べます。
- 共有アイテムをインポートする際も同様に重複チェックが入り、上書き or スキップが選べます。

---
ご要望があれば、設定のエクスポート/インポート機能や、共有APIへの投稿UI（投稿フォーム）も追加できます。

